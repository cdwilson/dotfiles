#!/bin/bash
# SPDX-FileCopyrightText: 2022 Chris Wilson <christopher.david.wilson@gmail.com>
#
# SPDX-License-Identifier: MIT

# Put the following in your .gitconfig:
# [diff]
# 	tool = Kaleidoscope
# [difftool "kicad-ksdiff"]
# 	cmd = kicad-ksdiff $LOCAL $REMOTE
#
# Run with the following command:
# git difftool --tool=kicad-ksdiff board.kicad_pcb

T1=$(mktemp)
T2=$(mktemp)
sed -E 's/\(tstamp .*\)/\(tstamp REPLACED\)/g' ${1} > ${T1}
sed -E 's/\(tstamp .*\)/\(tstamp REPLACED\)/g' ${2} > ${T2}
ksdiff "${T1}" "${T2}"
rm -f "${T1}" "${T2}"
